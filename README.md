# Corona Mask Alarm
코로나 사태로 마스크가 부족하다. ***내가 사는 동네 약국에 마스크 재고가 있으면 알람이 뜨는
서비스를 급한대로 실행해보자.***
가족들이 공적 마스크를 사러가면 재고가 없어서 돌아오거나, 오래 기다리다가 못사고 돌아오는 경우가 있었다.
가족들이 집에 있다가 재고가 있는 경우에만 약국에 가서 마스크를 사올 수 있게하려고 만들었다.

## 사용방법
로컬 PC에 설치하여 사용한다. yml 파일에 입력한 주소, 약국에 한하여 재고가 있는 경우에
PC 사운드로 알람을 알려주고, 로그로 재고 있는 약국정보를 확인한다.

### 1. 해당 프로젝트를 로컬 다운로드
```
$ git clone https://github.com/gregor77/corona-mask-alarm.git
```
### 2. application.yml 속성 변경
```
mask:
  interval.time.unit.minute: 1
  city: 서울특별시 광진구
  stores: 은혜약국, 수도약국, 현약국, 완미약국, 용마약국, 다솜약국
```
#### mask.interval.time.unit.minute
단위는 1분이고, 기본적으로 1분마다 확인한다. 예를 들어 60을 변경하면 1시간마다 확인한다.

#### mask.address
검색하고 싶은 "도시명 + 공백 + XX구"의 형태로 입력해야 한다.
* 입력한 주소별로 equal 비교기 때문에 정확하게 입력하지 않으면 동작하지 않는다.
* 예) 서울특별시 광진구
* 예) 대구광역시 달서구

#### mask.stores
입력한 주소, 가게명이 완벽히 일치하는 경우에, 재고가 있는 경우만 데스크탑 소리로 알람을 실행한다. 

* 가게명은 약국, 우체국, 농협 가능하다.

### 3. 서비스 실행하여 확인
로컬 PC에 프로젝트 경로에서 gradle wrapper를 통해서 서비스를 실행한다.
```
# window 경우 - window 10 테스트 확인
$ gradlew.bat bootRun

# mac, linux 경우 - 테스트 해보지 못함
$ ./gradlew bootRun
```

### 4. 출력 결과
application.yml에 입력한 주소, 약국을 기준으로 ***재고가 100개 이상이거나, 30개 이상 100개 미만의 경우***에만
로컬 PC 알람 소리가 들리고, 출력 로그를 확인할 수 있다.
```
{ 주소='서울특별시 광진구 광나루로 529 (구의동)', 약국명='수도약국', 입고시간='2020/03/12 17:33:00', 재고상태=100개 이상, 데이터생성일자='2020/03/12 23:40:26'}
{ 주소='서울특별시 광진구 광나루로 542 (구의동)', 약국명='은혜약국', 입고시간='2020/03/12 17:33:00', 재고상태=30개 이상 100개 미만, 데이터생성일자='2020/03/12 23:40:26'}
```

### 5. 종료
알람소리 그만듣고 싶다. 서비스를 손으로 종료해야 한다.
```
# 실행한 터미널에서 직접 서비스를 종료해야 한다.
# window Ctrl+C 누르고 y 입력.
```

## 제약사항
* 약국에서 재고 갱신을 손으로 입력해야 한다고 들었다. 오차가 있을 수 있다
* 개발자가 로컬 PC에 설치해야 하며, 알람 결과를 로그로 확인해야 한다.
* 사운드로 알람이 뜨는 것은 window 10에서만 확인해 보았다.
* 사용성 떨어지고 구리다. ㅎㅎ

## 참고 사이트
* [공공 데이터 포탈, 공적마스크 판매정보](https://www.data.go.kr/dataset/15043025/openapi.do)
* [공적마스크 API Swagger document](https://app.swaggerhub.com/apis-docs/Promptech/public-mask-info/20200307-oas3#/StoreSaleResult) 
